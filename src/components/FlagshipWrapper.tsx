import { FlagshipContainer } from "@thinkflagship/web-shorts";
import { useEffect } from "react";

const licenseKey = {
  ecom: "pk_live_477b30b5e4effeb96045071b33f532021b41e11e93331694.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1FY29tIiwicGxhdGZvcm1UeXBlIjoiV0VCIiwiZG9tYWluIjp7ImRvbWFpbiI6Imh0dHBzOi8vZGVtby5ob3Jpem9uZXhwLmNvbSIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjBUMDc6MTU6NDYuMTMwWiIsImNyZWF0ZWRCeSI6IjY4NzRhYWE3NDBkZDdlOWM0ODE3NmQ5NiIsInRlbmFudElkIjoiNjg3NGFhYTc0MGRkN2U5YzQ4MTc2ZDkyIiwiX2lkIjoiNjg3NGFlYTI0MGRkN2U5YzQ4MTc2ZGEzIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNDc3MzQ2LCJleHAiOjQ5MDYwNzczNDZ9.Vk59dGB7ejeprsJ8VrAJvj07i6Y27UeHj_wH36GAmfs",
  landing: "pk_live_477b30b5e4effeb96045071b33f532021b41e11e93331694.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1FY29tIiwicGxhdGZvcm1UeXBlIjoiV0VCIiwiZG9tYWluIjp7ImRvbWFpbiI6Imh0dHBzOi8vZGVtby5ob3Jpem9uZXhwLmNvbSIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjBUMDc6MTU6NDYuMTMwWiIsImNyZWF0ZWRCeSI6IjY4NzRhYWE3NDBkZDdlOWM0ODE3NmQ5NiIsInRlbmFudElkIjoiNjg3NGFhYTc0MGRkN2U5YzQ4MTc2ZDkyIiwiX2lkIjoiNjg3NGFlYTI0MGRkN2U5YzQ4MTc2ZGEzIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNDc3MzQ2LCJleHAiOjQ5MDYwNzczNDZ9.Vk59dGB7ejeprsJ8VrAJvj07i6Y27UeHj_wH36GAmfs",
  telco: "pk_live_0fbf4d4204cfcd00219f2dd81d459fa8593fc27ab58f02ea.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtbyBXZWIiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tIiwidmVyaWZpZWQiOmZhbHNlfSwiZXhwaXJlc0F0IjoiMjEyNS0wNS0yNlQxMzoxMTo0NC44OTFaIiwiY3JlYXRlZEJ5IjoiNjg1NDA5ODQ0MGJlM2U4ODI2NGY0NTZjIiwidGVuYW50SWQiOiI2ODU0MDk4NDQwYmUzZTg4MjY0ZjQ1NjciLCJfaWQiOiI2ODU0MGM5MGMyNWVkMjllZGQ0ZGU4NDEiLCJ0b2tlblR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NTAzMzg3MDQsImV4cCI6NDkwMzkzODcwNH0.HATiUrEpOApzmYIrL_AVW6y52TNIY_yc3z4Qi7-9kWg",
  demo: "pk_live_0fbf4d4204cfcd00219f2dd81d459fa8593fc27ab58f02ea.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtbyBXZWIiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tIiwidmVyaWZpZWQiOmZhbHNlfSwiZXhwaXJlc0F0IjoiMjEyNS0wNS0yNlQxMzoxMTo0NC44OTFaIiwiY3JlYXRlZEJ5IjoiNjg1NDA5ODQ0MGJlM2U4ODI2NGY0NTZjIiwidGVuYW50SWQiOiI2ODU0MDk4NDQwYmUzZTg4MjY0ZjQ1NjciLCJfaWQiOiI2ODU0MGM5MGMyNWVkMjllZGQ0ZGU4NDEiLCJ0b2tlblR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NTAzMzg3MDQsImV4cCI6NDkwMzkzODcwNH0.HATiUrEpOApzmYIrL_AVW6y52TNIY_yc3z4Qi7-9kWg",
  sports: "pk_live_8bd61906386f48d1d71adfd82bb02e63bc3af065ba2d3802.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1TcG9ydHMiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tLyIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjJUMTU6MDE6NTcuMjEwWiIsImNyZWF0ZWRCeSI6IjY4NzdiZDA3Y2YwOGU5MTAzZDYzODAzNSIsInRlbmFudElkIjoiNjg3N2JkMDdjZjA4ZTkxMDNkNjM4MDMxIiwiX2lkIjoiNjg3N2JlZTVjZjA4ZTkxMDNkNjM4MDNiIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNjc4MTE3LCJleHAiOjQ5MDYyNzgxMTd9.AgsGOAizEmdfHwsGXQWJADgpBP3UFlnhoDAAWPsQ-m4"
}
const FlagshipWrapper = ({ tenant, children }: { tenant: keyof typeof licenseKey, children: React.ReactNode }) => {

  useEffect(() => {
    const previousTenant = localStorage.getItem("lastTenant");
    if (previousTenant && previousTenant !== tenant) {
      localStorage.clear();
      localStorage.setItem("lastTenant", tenant); // set after clear
      window.location.reload();
    } else if (!previousTenant) {
      localStorage.setItem("lastTenant", tenant);
    }
    // If same tenant, do nothing
  }, [tenant]);

  return (
    <FlagshipContainer
      licenseKey={licenseKey[tenant]}
      platformId="https://demo.horizonexp.com/"
    >
      {children}
    </FlagshipContainer>
  );
};

export default FlagshipWrapper;