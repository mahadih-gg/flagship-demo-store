import { FlagshipContainer } from "@thinkflagship/web-shorts";
import { useEffect } from "react";

const licenseKey = {
  ecom: "pk_live_477b30b5e4effeb96045071b33f532021b41e11e93331694.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1FY29tIiwicGxhdGZvcm1UeXBlIjoiV0VCIiwiZG9tYWluIjp7ImRvbWFpbiI6Imh0dHBzOi8vZGVtby5ob3Jpem9uZXhwLmNvbSIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjBUMDc6MTU6NDYuMTMwWiIsImNyZWF0ZWRCeSI6IjY4NzRhYWE3NDBkZDdlOWM0ODE3NmQ5NiIsInRlbmFudElkIjoiNjg3NGFhYTc0MGRkN2U5YzQ4MTc2ZDkyIiwiX2lkIjoiNjg3NGFlYTI0MGRkN2U5YzQ4MTc2ZGEzIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNDc3MzQ2LCJleHAiOjQ5MDYwNzczNDZ9.Vk59dGB7ejeprsJ8VrAJvj07i6Y27UeHj_wH36GAmfs",
  landing: "pk_live_477b30b5e4effeb96045071b33f532021b41e11e93331694.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1FY29tIiwicGxhdGZvcm1UeXBlIjoiV0VCIiwiZG9tYWluIjp7ImRvbWFpbiI6Imh0dHBzOi8vZGVtby5ob3Jpem9uZXhwLmNvbSIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjBUMDc6MTU6NDYuMTMwWiIsImNyZWF0ZWRCeSI6IjY4NzRhYWE3NDBkZDdlOWM0ODE3NmQ5NiIsInRlbmFudElkIjoiNjg3NGFhYTc0MGRkN2U5YzQ4MTc2ZDkyIiwiX2lkIjoiNjg3NGFlYTI0MGRkN2U5YzQ4MTc2ZGEzIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNDc3MzQ2LCJleHAiOjQ5MDYwNzczNDZ9.Vk59dGB7ejeprsJ8VrAJvj07i6Y27UeHj_wH36GAmfs",
  telco: "pk_live_0fbf4d4204cfcd00219f2dd81d459fa8593fc27ab58f02ea.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtbyBXZWIiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tIiwidmVyaWZpZWQiOmZhbHNlfSwiZXhwaXJlc0F0IjoiMjEyNS0wNS0yNlQxMzoxMTo0NC44OTFaIiwiY3JlYXRlZEJ5IjoiNjg1NDA5ODQ0MGJlM2U4ODI2NGY0NTZjIiwidGVuYW50SWQiOiI2ODU0MDk4NDQwYmUzZTg4MjY0ZjQ1NjciLCJfaWQiOiI2ODU0MGM5MGMyNWVkMjllZGQ0ZGU4NDEiLCJ0b2tlblR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NTAzMzg3MDQsImV4cCI6NDkwMzkzODcwNH0.HATiUrEpOApzmYIrL_AVW6y52TNIY_yc3z4Qi7-9kWg",
  demo: "pk_live_0fbf4d4204cfcd00219f2dd81d459fa8593fc27ab58f02ea.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtbyBXZWIiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tIiwidmVyaWZpZWQiOmZhbHNlfSwiZXhwaXJlc0F0IjoiMjEyNS0wNS0yNlQxMzoxMTo0NC44OTFaIiwiY3JlYXRlZEJ5IjoiNjg1NDA5ODQ0MGJlM2U4ODI2NGY0NTZjIiwidGVuYW50SWQiOiI2ODU0MDk4NDQwYmUzZTg4MjY0ZjQ1NjciLCJfaWQiOiI2ODU0MGM5MGMyNWVkMjllZGQ0ZGU4NDEiLCJ0b2tlblR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NTAzMzg3MDQsImV4cCI6NDkwMzkzODcwNH0.HATiUrEpOApzmYIrL_AVW6y52TNIY_yc3z4Qi7-9kWg",
  sports: "pk_live_8bd61906386f48d1d71adfd82bb02e63bc3af065ba2d3802.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1TcG9ydHMiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tLyIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDYtMjJUMTU6MDE6NTcuMjEwWiIsImNyZWF0ZWRCeSI6IjY4NzdiZDA3Y2YwOGU5MTAzZDYzODAzNSIsInRlbmFudElkIjoiNjg3N2JkMDdjZjA4ZTkxMDNkNjM4MDMxIiwiX2lkIjoiNjg3N2JlZTVjZjA4ZTkxMDNkNjM4MDNiIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzUyNjc4MTE3LCJleHAiOjQ5MDYyNzgxMTd9.AgsGOAizEmdfHwsGXQWJADgpBP3UFlnhoDAAWPsQ-m4",
  restaurant: "pk_live_e377aa6171b5a54720ff5769bcb3112a295c72c920cffd8a.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1QaXp6YSIsInBsYXRmb3JtVHlwZSI6IldFQiIsImRvbWFpbiI6eyJkb21haW4iOiJodHRwczovL2RlbW8uaG9yaXpvbmV4cC5jb20vIiwidmVyaWZpZWQiOmZhbHNlfSwiZXhwaXJlc0F0IjoiMjEyNS0wNy0wNVQxNDozMzoyOC4zODZaIiwiY3JlYXRlZEJ5IjoiNjg4OGI3NGZjZjA4ZTkxMDNkNjNiZDA0IiwidGVuYW50SWQiOiI2ODg4Yjc0ZmNmMDhlOTEwM2Q2M2JkMDAiLCJfaWQiOiI2ODg4ZGJiOGNmMDhlOTEwM2Q2M2JkNGMiLCJ0b2tlblR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NTM3OTk2MDgsImV4cCI6NDkwNzM5OTYwOH0.XccGSei8YWmO3vr3fVgv8i_rDsAbNtqz5WXnNG3qV2Q",
  "daily-star": "pk_live_3738c0fd36753f65ec9046a6b3bdc52819f0bb35aaa9bd34.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1EYWlseS1TdGFyIiwicGxhdGZvcm1UeXBlIjoiV0VCIiwiZG9tYWluIjp7ImRvbWFpbiI6Imh0dHBzOi8vZGVtby5ob3Jpem9uZXhwLmNvbS8iLCJ2ZXJpZmllZCI6ZmFsc2V9LCJleHBpcmVzQXQiOiIyMTI1LTA3LTA1VDE2OjAzOjQ4LjgzMFoiLCJjcmVhdGVkQnkiOiI2ODg4Yjg5MWNmMDhlOTEwM2Q2M2JkMTUiLCJ0ZW5hbnRJZCI6IjY4ODhiODkxY2YwOGU5MTAzZDYzYmQxMSIsIl9pZCI6IjY4ODhmMGU0Y2YwOGU5MTAzZDYzYmRjYyIsInRva2VuVHlwZSI6ImFjY2VzcyIsImlhdCI6MTc1MzgwNTAyOCwiZXhwIjo0OTA3NDA1MDI4fQ.Sw6W2JacLhMtSD7PjCmT41p6ejR0ykRfb9l1w7hutRs",
  ott: "pk_live_8f688deeecb2af53b4dfa65f20e8a36ee24242d04d4cd216.eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoiRGVtby1PVFQiLCJwbGF0Zm9ybVR5cGUiOiJXRUIiLCJkb21haW4iOnsiZG9tYWluIjoiaHR0cHM6Ly9kZW1vLmhvcml6b25leHAuY29tLyIsInZlcmlmaWVkIjpmYWxzZX0sImV4cGlyZXNBdCI6IjIxMjUtMDctMTZUMTI6NDM6NDMuNzA4WiIsImNyZWF0ZWRCeSI6IjY4OTMzNzFiODNkMDI5ODhkZDRmMDdiZiIsInRlbmFudElkIjoiNjg5MzM3MWI4M2QwMjk4OGRkNGYwN2JiIiwiX2lkIjoiNjg5NzQyN2Y4M2QwMjk4OGRkNGYwYTIyIiwidG9rZW5UeXBlIjoiYWNjZXNzIiwiaWF0IjoxNzU0NzQzNDIzLCJleHAiOjQ5MDgzNDM0MjN9.unaVPgfvWEtI0LgtZQeCek61B_tFxUUXeZICKZQVUzs"
}
const FlagshipWrapper = ({ tenant, children }: { tenant: keyof typeof licenseKey, children: React.ReactNode }) => {

  useEffect(() => {
    const previousTenant = localStorage.getItem("lastTenant");
    if (previousTenant && previousTenant !== tenant) {
      localStorage.clear();
      localStorage.setItem("lastTenant", tenant); // set after clear
      window.location.reload();
    } else if (!previousTenant) {
      localStorage.setItem("lastTenant", tenant);
    }
    // If same tenant, do nothing
  }, [tenant]);

  return (
    <FlagshipContainer
      licenseKey={licenseKey[tenant]}
      platformId="https://demo.horizonexp.com/"
    >
      {children}
    </FlagshipContainer>
  );
};

export default FlagshipWrapper;